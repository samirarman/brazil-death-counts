---
title: "Base de dados de óbitos do Portal da Transparência do Registro Civil"
---
```{r, echo=FALSE}
loadd(by_city_monthly)
loadd(by_city_yearly)
loadd(by_state_monthly)
loadd(by_state_yearly)
ggplot2::theme_set(theme_bw())
```

## Introdução

Base de dados obtida do portal da transparência do Registro Civil, de 2015 até junho de 2020.

Os dados estão em nível municipal e estadual, mês a mês. Faça o download [aqui.](https://data.world/samirarman/brazil-death-data)

O código-fonte utilizado para obter os dados está disponível [aqui.](https://github.com/samirarman/brazil-death-data)

**IMPORTANTE: Antes de usar os dados, faça as verificações estatísticas e tratamentos necessários!**

---

## Tabelas disponíveis


* **`by_city_monthly.csv`**: Certidões de óbito emitidas em cada cidade, mês a mês, de janeiro de 2015 até junho de 2020. 
Corresponde a preencher os campos "Ano", "Mês" e "Estado" no portal do Registro Civil. Ex.: 2019, Janeiro, Todas, São Paulo.


* **`by_city_yearly.csv`**: Certidões de óbito emitidas em cada cidade, ano a ano, de 2015 até 2020. 
Corresponde a preencher os campos  "Ano" e "Estado" no portal do Registro Civil. Ex.: 2019, Todos, Todas, São Paulo.


* **`by_state_monthly.csv`**: Certidões de óbito emitidas em cada estado brasileiro, mês a mês, de janeiro de 2015 até junho de 2020.
Corresponde a preencher os campos  "Ano" e "Mês" no portal do Registro Civil. Ex.: 2019, Janeiro, Todas, Todos.


* **`by_state_yearly.csv`**: Certidões de óbito emitidas em cada estado, ano a ano, de janeiro de 2015 até junho de 2020.
Corresponde a preencher o campo "Ano" no portal. Ex.: 2018, Janeiro, Todas, Todos.

---

## Amostras dos dados


### Por cidade, mês a mês (tabela *by_city_monthly*)

```{r echo = FALSE}
data <- by_city_monthly %>%
    filter(Cidade == "São Paulo" & Estado == "São Paulo") %>%
    mutate(Ano = as.factor(Ano),
           Mês = factor(Mês, levels = MONTHS))

ggplotly(
    ggplot(data, 
           aes(x = Mês, y = Registros, group = Ano)
    ) +
        geom_point(aes(color = Ano)) +
        labs(title = "São Paulo - SP") +
        ylim(0, NA) +
        theme(axis.text.x = element_text(angle = 330))
)
```


### Por cidade, ano a ano (tabela *by_city_yearly*)

```{r echo = FALSE}
data <- by_city_yearly %>%
    filter(Cidade == "Rio de Janeiro" & Estado == "Rio de Janeiro")
ggplotly(ggplot(data, aes(x = Ano, y = Registros)) +
    geom_line(color = "red") +
    labs(title = "Rio de Janeiro - RJ") +
        ylim(0, NA)
)
```


### Por estado, mês a mês (tabela *by_state_monthly*)

```{r echo = FALSE}
data <- by_state_monthly %>%
    filter(Estado == "Ceará") %>%
    mutate(Ano = as.factor(Ano),
           Mês = factor(Mês, levels = MONTHS))

ggplotly(ggplot(data, aes(x = Mês, y = Registros, group = Ano)) +
    geom_point(aes(color = Ano)) +
    labs(title = "Ceará") +
        ylim(0, NA)
)
```


### Por estado, ano a ano (tabela *by_state_yearly*)

```{r echo = FALSE}
data <- by_state_yearly %>%
    filter(Estado == "Paraná")

(ggplot(data, aes(x = Ano, y = Registros)) +
    geom_line(color = "red") +
    labs(title = "Paraná") +
        ylim(0, NA)
)
```

---

## Pré-análise dos dados

```{r,child="sanity_checks.Rmd"}
```