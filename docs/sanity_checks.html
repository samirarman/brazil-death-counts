<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Análise preliminar dos dados coletados</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.13/datatables.js"></script>
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Dados dos óbitos do Registro Civil</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">Sobre</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Análise preliminar dos dados coletados</h1>

</div>


<p>Última atualização: <strong>2020-06-20 01:00:31</strong></p>
<div id="nomes-das-cidades-com-problemas-de-grafia-na-tabela-by_cities_monthly" class="section level3">
<h3>Nomes das cidades com problemas de grafia na tabela <em>by_cities_monthly</em></h3>
<pre class="r"><code>master_table &lt;-
  ibge_data %&gt;%
  mutate(key = squash_string(
    make_place_key(
      Nome_Município,
      Nome_UF
    )
  ))

problem_names_c &lt;- by_city_monthly %&gt;%
    mutate(key = squash_string(make_place_key(Cidade, Estado))) %&gt;%
    mutate(exists = key %in% master_table$key) %&gt;%
    filter(exists == FALSE) 


# Pull unique values
(problem_names_c %&gt;% pull(key) %&gt;% unique)</code></pre>
<pre><code>##  [1] &quot;brazlandia - distrito federal&quot;             &quot;ceilandia - distrito federal&quot;              &quot;gama - distrito federal&quot;                  
##  [4] &quot;guara - distrito federal&quot;                  &quot;nucleo bandeirantes - distrito federal&quot;    &quot;paranoa - distrito federal&quot;               
##  [7] &quot;planaltina - distrito federal&quot;             &quot;samambaia - distrito federal&quot;              &quot;sobradinho - distrito federal&quot;            
## [10] &quot;taguatinga - distrito federal&quot;             &quot;senador la roque - maranhao&quot;               &quot;governador edson lobao - maranhao&quot;        
## [13] &quot;poxoreo - mato grosso&quot;                     &quot;sao thome das letras - minas gerais&quot;       &quot;brasopolis - minas gerais&quot;                
## [16] &quot;santarem - paraiba&quot;                        &quot;lagoa do itaenga - pernambuco&quot;             &quot;iguaraci - pernambuco&quot;                    
## [19] &quot;santana do livramento - rio grande do sul&quot; &quot;espigao do oeste - rondonia&quot;               &quot;biritiba-mirim - sao paulo&quot;               
## [22] &quot;sao valerio da natividade - tocantins&quot;     &quot;fortaleza do tabocao - tocantins&quot;          &quot;parati - rio de janeiro&quot;                  
## [25] &quot;olhos d&#39;agua - minas gerais&quot;               &quot;sem peixe - minas gerais&quot;                  &quot;amparo da serra - minas gerais&quot;           
## [28] &quot;florinia - sao paulo&quot;                      &quot;serido - paraiba&quot;                          &quot;graccho cardoso - sergipe&quot;                
## [31] &quot;arez - rio grande do norte&quot;                &quot;couto de magalhaes - tocantins&quot;            &quot;eldorado dos carajas - para&quot;              
## [34] &quot;jequirica - bahia&quot;                         &quot;santa isabel do para - para&quot;               &quot;campo de santana - paraiba&quot;</code></pre>
</div>
<div id="nomes-das-cidades-com-problemas-de-grafia-na-tabela-by_cities_yearly" class="section level3">
<h3>Nomes das cidades com problemas de grafia na tabela <em>by_cities_yearly</em></h3>
<pre class="r"><code>problem_names_cs &lt;- by_city_yearly %&gt;%
   mutate(key = squash_string(make_place_key(Cidade, Estado))) %&gt;%
   mutate(exists = key %in% master_table$key) %&gt;%
   filter(exists == FALSE) 

# Pull unique values
(problem_names_cs %&gt;% pull(key) %&gt;% unique)</code></pre>
<pre><code>##  [1] &quot;brazlandia - distrito federal&quot;             &quot;ceilandia - distrito federal&quot;              &quot;gama - distrito federal&quot;                  
##  [4] &quot;guara - distrito federal&quot;                  &quot;nucleo bandeirantes - distrito federal&quot;    &quot;paranoa - distrito federal&quot;               
##  [7] &quot;planaltina - distrito federal&quot;             &quot;samambaia - distrito federal&quot;              &quot;sobradinho - distrito federal&quot;            
## [10] &quot;taguatinga - distrito federal&quot;             &quot;senador la roque - maranhao&quot;               &quot;governador edson lobao - maranhao&quot;        
## [13] &quot;poxoreo - mato grosso&quot;                     &quot;sao thome das letras - minas gerais&quot;       &quot;sem peixe - minas gerais&quot;                 
## [16] &quot;olhos d&#39;agua - minas gerais&quot;               &quot;brasopolis - minas gerais&quot;                 &quot;amparo da serra - minas gerais&quot;           
## [19] &quot;santarem - paraiba&quot;                        &quot;lagoa do itaenga - pernambuco&quot;             &quot;iguaraci - pernambuco&quot;                    
## [22] &quot;parati - rio de janeiro&quot;                   &quot;santana do livramento - rio grande do sul&quot; &quot;espigao do oeste - rondonia&quot;              
## [25] &quot;florinia - sao paulo&quot;                      &quot;biritiba-mirim - sao paulo&quot;                &quot;sao valerio da natividade - tocantins&quot;    
## [28] &quot;fortaleza do tabocao - tocantins&quot;          &quot;serido - paraiba&quot;                          &quot;arez - rio grande do norte&quot;               
## [31] &quot;graccho cardoso - sergipe&quot;                 &quot;couto de magalhaes - tocantins&quot;            &quot;eldorado dos carajas - para&quot;              
## [34] &quot;jequirica - bahia&quot;                         &quot;campo de santana - paraiba&quot;                &quot;santa isabel do para - para&quot;</code></pre>
</div>
<div id="todos-os-nomes-das-cidades-com-problemas-de-grafia" class="section level3">
<h3>Todos os nomes das cidades com problemas de grafia</h3>
<pre class="r"><code>c(pull(problem_names_c, key), pull(problem_names_cs, key)) %&gt;% unique</code></pre>
<pre><code>##  [1] &quot;brazlandia - distrito federal&quot;             &quot;ceilandia - distrito federal&quot;              &quot;gama - distrito federal&quot;                  
##  [4] &quot;guara - distrito federal&quot;                  &quot;nucleo bandeirantes - distrito federal&quot;    &quot;paranoa - distrito federal&quot;               
##  [7] &quot;planaltina - distrito federal&quot;             &quot;samambaia - distrito federal&quot;              &quot;sobradinho - distrito federal&quot;            
## [10] &quot;taguatinga - distrito federal&quot;             &quot;senador la roque - maranhao&quot;               &quot;governador edson lobao - maranhao&quot;        
## [13] &quot;poxoreo - mato grosso&quot;                     &quot;sao thome das letras - minas gerais&quot;       &quot;brasopolis - minas gerais&quot;                
## [16] &quot;santarem - paraiba&quot;                        &quot;lagoa do itaenga - pernambuco&quot;             &quot;iguaraci - pernambuco&quot;                    
## [19] &quot;santana do livramento - rio grande do sul&quot; &quot;espigao do oeste - rondonia&quot;               &quot;biritiba-mirim - sao paulo&quot;               
## [22] &quot;sao valerio da natividade - tocantins&quot;     &quot;fortaleza do tabocao - tocantins&quot;          &quot;parati - rio de janeiro&quot;                  
## [25] &quot;olhos d&#39;agua - minas gerais&quot;               &quot;sem peixe - minas gerais&quot;                  &quot;amparo da serra - minas gerais&quot;           
## [28] &quot;florinia - sao paulo&quot;                      &quot;serido - paraiba&quot;                          &quot;graccho cardoso - sergipe&quot;                
## [31] &quot;arez - rio grande do norte&quot;                &quot;couto de magalhaes - tocantins&quot;            &quot;eldorado dos carajas - para&quot;              
## [34] &quot;jequirica - bahia&quot;                         &quot;santa isabel do para - para&quot;               &quot;campo de santana - paraiba&quot;</code></pre>
<pre class="r"><code>list_df &lt;- list(city_monthly_table = by_city_monthly, 
        cities_yearly_table = by_city_yearly, 
        states_monthly_table = by_state_monthly, 
        states_yearly_table = by_state_yearly)
    summary &lt;- list_df %&gt;%
        map(. %&gt;% 
        group_by(Ano, Estado) %&gt;% 
        summarise(Registros = sum(Registros))
        )
    for (i in seq_along(summary)) {
        summary[[i]]$table &lt;- rep(names(summary[i]), nrow(summary[[i]]))
    }
    summary %&gt;% 
        bind_rows %&gt;% 
        pivot_wider(names_from = table, values_from = Registros)</code></pre>
<pre><code>## # A tibble: 162 x 6
## # Groups:   Ano [6]
##      Ano Estado           city_monthly_table cities_yearly_table states_monthly_table states_yearly_table
##    &lt;dbl&gt; &lt;chr&gt;                         &lt;dbl&gt;               &lt;dbl&gt;                &lt;dbl&gt;               &lt;dbl&gt;
##  1  2015 Acre                           2524                2524                 2524                2524
##  2  2015 Alagoas                        7369                7369                 7000                7000
##  3  2015 Amapá                          1978                1991                 1989                1989
##  4  2015 Amazonas                       2481                2656                 2542                2542
##  5  2015 Bahia                         29777               29777                28580               28580
##  6  2015 Ceará                          8597                8597                 8169                8169
##  7  2015 Distrito Federal              13854               13897                13897               13897
##  8  2015 Espírito Santo                22476               22555                22555               22555
##  9  2015 Goiás                         22956               23143                23143               23143
## 10  2015 Maranhão                       2033                2036                 2036                2036
## # … with 152 more rows</code></pre>
</div>
<div id="somas-dos-registros-nas-tabelas" class="section level3">
<h3>Somas dos registros nas tabelas</h3>
<div id="tabela-by_city_monthly" class="section level4">
<h4>Tabela <em>by_city_monthly</em></h4>
<pre class="r"><code>ca &lt;- yearly_aggregate(by_city_monthly)
DT::datatable(ca)</code></pre>
<div id="htmlwidget-c7bf7f01c010f6dfd6ac" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c7bf7f01c010f6dfd6ac">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],[2015,2016,2017,2018,2019,2020],[788531,913829,947620,1078841,1213073,596720]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ano<\/th>\n      <th>Registros<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabela-by_city_yearly" class="section level4">
<h4>Tabela <em>by_city_yearly</em></h4>
<pre class="r"><code>csa &lt;- yearly_aggregate(by_city_yearly)
DT::datatable(csa)</code></pre>
<div id="htmlwidget-4699eac14a620648183d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4699eac14a620648183d">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],[2015,2016,2017,2018,2019,2020],[789647,914655,948373,1079757,1213573,598797]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ano<\/th>\n      <th>Registros<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabela-by_state_monthly" class="section level4">
<h4>Tabela <em>by_state_monthly</em></h4>
<pre class="r"><code>sa &lt;- yearly_aggregate(by_state_monthly)
DT::datatable(sa)</code></pre>
<div id="htmlwidget-13b55ed127254f0c6d5c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-13b55ed127254f0c6d5c">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],[2015,2016,2017,2018,2019,2020],[787300,906479,947069,1075726,1212326,596555]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ano<\/th>\n      <th>Registros<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabela-by_state_monthly-1" class="section level4">
<h4>Tabela <em>by_state_monthly</em></h4>
<pre class="r"><code>ssa &lt;- yearly_aggregate(by_state_yearly)
DT::datatable(ssa)</code></pre>
<div id="htmlwidget-f2bf2b4bf47a8afcfd6e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f2bf2b4bf47a8afcfd6e">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],[2015,2016,2017,2018,2019,2020],[787300,906479,947069,1075726,1212326,598797]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ano<\/th>\n      <th>Registros<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="comparação-entre-tabelas" class="section level4">
<h4>Comparação entre tabelas</h4>
<pre class="r"><code>bind_rows(&quot;cities_monthly&quot; = ca, 
          &quot;cities_yearly&quot; = csa, 
          &quot;states_monthly&quot; = sa, 
          &quot;states_yearly&quot; = ssa, 
          .id = &quot;origin_table&quot;) %&gt;% 
  pivot_wider(names_from = origin_table, values_from = Registros) %&gt;%
  DT::datatable()</code></pre>
<div id="htmlwidget-d998149d1670352e85ce" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d998149d1670352e85ce">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],[2015,2016,2017,2018,2019,2020],[788531,913829,947620,1078841,1213073,596720],[789647,914655,948373,1079757,1213573,598797],[787300,906479,947069,1075726,1212326,596555],[787300,906479,947069,1075726,1212326,598797]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ano<\/th>\n      <th>cities_monthly<\/th>\n      <th>cities_yearly<\/th>\n      <th>states_monthly<\/th>\n      <th>states_yearly<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabela-by_city_monthly-vs-by_city_yearly" class="section level4">
<h4>Tabela <em>by_city_monthly</em> vs <em>by_city_yearly</em></h4>
<pre class="r"><code>cma &lt;- by_city_monthly %&gt;%
  group_by(Estado, Ano) %&gt;%
  summarise(Registros = sum(Registros))

cysa &lt;- by_city_yearly %&gt;%
  select(Cidade, Estado, Ano, Registros) %&gt;%
    group_by(Estado, Ano) %&gt;%
  summarise(Registros = sum(Registros))


combined_cities &lt;- 
    bind_rows(&quot;cities&quot; = cma, &quot;cities_summary&quot; = cysa, .id = &quot;origin_table&quot;) %&gt;%
    pivot_wider(names_from = origin_table, values_from = Registros) %&gt;%
    mutate(delta_abs = abs(cities_summary - cities))


summary(combined_cities)</code></pre>
<pre><code>##     Estado               Ano           cities       cities_summary     delta_abs  
##  Length:162         Min.   :2015   Min.   :   870   Min.   :   870   Min.   :  0  
##  Class :character   1st Qu.:2016   1st Qu.:  6968   1st Qu.:  6980   1st Qu.:  1  
##  Mode  :character   Median :2018   Median : 14688   Median : 14732   Median : 11  
##                     Mean   :2018   Mean   : 34189   Mean   : 34227   Mean   : 39  
##                     3rd Qu.:2019   3rd Qu.: 33345   3rd Qu.: 33352   3rd Qu.: 49  
##                     Max.   :2020   Max.   :311562   Max.   :311570   Max.   :249</code></pre>
<pre class="r"><code>combined_cities %&gt;% 
  filter(delta_abs != 0) %&gt;%
  arrange(-delta_abs) %&gt;%
  DT::datatable()</code></pre>
<div id="htmlwidget-34c7fdc0680dcf090ce7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-34c7fdc0680dcf090ce7">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122"],["Ceará","Minas Gerais","Pará","Amapá","Ceará","Paraíba","Goiás","Amazonas","Bahia","Mato Grosso","Paraíba","Paraíba","Piauí","Rio Grande do Norte","Bahia","Tocantins","Maranhão","Mato Grosso","Mato Grosso","Rio Grande do Norte","São Paulo","Goiás","Santa Catarina","Goiás","Bahia","Amazonas","Rio Grande do Norte","Alagoas","Rio de Janeiro","Pernambuco","Rio Grande do Norte","Maranhão","Espírito Santo","Rio de Janeiro","Tocantins","Paraíba","Santa Catarina","São Paulo","Rio Grande do Sul","Paraná","Minas Gerais","Pará","Paraíba","Rio de Janeiro","Rio Grande do Norte","Maranhão","Distrito Federal","Paraíba","Goiás","Piauí","Tocantins","Goiás","Amapá","Rio Grande do Norte","Rio Grande do Sul","Espírito Santo","Sergipe","Pernambuco","Rondônia","Rondônia","Ceará","Rio de Janeiro","Ceará","Espírito Santo","Espírito Santo","Mato Grosso do Sul","Pará","Ceará","Santa Catarina","Mato Grosso do Sul","Pernambuco","São Paulo","Espírito Santo","Rondônia","Santa Catarina","Amapá","Goiás","Amapá","Piauí","Roraima","Pará","Espírito Santo","Sergipe","Distrito Federal","Minas Gerais","Distrito Federal","Maranhão","Roraima","São Paulo","Rondônia","Roraima","Acre","Pará","Rondônia","São Paulo","Minas Gerais","Sergipe","Amazonas","Rondônia","Maranhão","Mato Grosso","Amapá","Distrito Federal","Pernambuco","Piauí","São Paulo","Sergipe","Tocantins","Amapá","Amazonas","Distrito Federal","Maranhão","Pará","Paraná","Pernambuco","Piauí","Rio Grande do Sul","Santa Catarina","Sergipe","Sergipe","Tocantins","Tocantins"],[2016,2020,2020,2018,2020,2015,2015,2015,2020,2020,2016,2017,2020,2016,2018,2015,2020,2018,2017,2018,2015,2020,2017,2016,2016,2019,2020,2020,2015,2020,2017,2018,2015,2017,2017,2019,2020,2020,2020,2020,2019,2019,2018,2020,2019,2019,2015,2020,2019,2018,2018,2017,2016,2015,2015,2017,2015,2019,2017,2016,2019,2019,2018,2016,2018,2016,2015,2017,2018,2020,2016,2018,2019,2019,2015,2020,2018,2015,2016,2020,2018,2020,2020,2016,2017,2020,2016,2018,2019,2015,2017,2020,2017,2018,2016,2016,2017,2020,2020,2015,2015,2019,2019,2017,2017,2017,2016,2020,2017,2018,2017,2017,2016,2016,2018,2015,2017,2019,2018,2019,2016,2019],[26632,54910,14915,2110,25380,17651,22956,2481,30515,6054,21107,22488,5515,7802,56765,2731,11855,15325,16249,13560,286739,14746,35996,24537,31077,13879,7816,9476,12550,34202,10621,13846,22476,17414,4901,26946,18409,154792,38510,31461,123437,25529,25672,72480,16443,20370,13854,12659,32198,10549,5946,28589,1888,3916,32624,24404,11087,61664,7277,7014,41180,137615,40381,23276,23758,14629,3785,37516,40110,7023,56782,302907,24742,7840,29695,1149,30602,1978,7062,1218,16328,12401,5726,13974,136705,6953,5129,2308,311562,5475,1693,2114,11113,7723,299939,134611,12758,10059,3634,2033,15713,2519,14861,58513,5769,299240,12327,2748,2263,6666,14395,5955,10527,75251,59449,2668,47048,41512,12602,12616,4102,5960],[26881,55158,15135,2324,25589,17843,23143,2656,30682,6221,21270,22648,5674,7957,56907,2860,11980,15446,16367,13678,286850,14856,36099,24639,31176,13976,7907,9564,12636,34287,10706,13930,22555,17493,4972,27012,18475,154855,38564,31511,123486,25578,25721,72525,16488,20414,13897,12699,32234,10585,5978,28620,1918,3945,32653,24431,11112,61688,7300,7036,41201,137636,40401,23296,23778,14609,3805,37535,40129,7041,56764,302925,24759,7856,29679,1164,30616,1991,7075,1231,16340,12411,5736,13983,136714,6961,5121,2316,311570,5482,1700,2120,11119,7729,299945,134616,12763,10063,3638,2036,15716,2521,14863,58515,5771,299242,12329,2750,2264,6667,14396,5956,10526,75250,59450,2669,47049,41513,12603,12617,4101,5961],[249,248,220,214,209,192,187,175,167,167,163,160,159,155,142,129,125,121,118,118,111,110,103,102,99,97,91,88,86,85,85,84,79,79,71,66,66,63,54,50,49,49,49,45,45,44,43,40,36,36,32,31,30,29,29,27,25,24,23,22,21,21,20,20,20,20,20,19,19,18,18,18,17,16,16,15,14,13,13,13,12,10,10,9,9,8,8,8,8,7,7,6,6,6,6,5,5,4,4,3,3,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Estado<\/th>\n      <th>Ano<\/th>\n      <th>cities<\/th>\n      <th>cities_summary<\/th>\n      <th>delta_abs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>ggplot(combined_cities) + geom_histogram(aes(delta_abs), binwidth = 10)</code></pre>
<p><img src="sanity_checks_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
</div>
<div id="tabela-by_state_monthly-vs-by_state_yearly" class="section level4">
<h4>Tabela <em>by_state_monthly</em> vs <em>by_state_yearly</em></h4>
<pre class="r"><code>sma &lt;- by_state_monthly %&gt;%
  group_by(Estado, Ano) %&gt;%
  summarise(Registros = sum(Registros))

sysa &lt;- by_state_yearly %&gt;%
  select(Estado, Ano, Registros)

combined_states &lt;- 
    bind_rows(&quot;states&quot; = sma, &quot;states_summary&quot; = sysa, .id = &quot;origin_table&quot;) %&gt;%
    pivot_wider(names_from = origin_table, values_from = Registros) %&gt;%
    mutate(delta_abs = abs(states_summary - states))

summary(combined_states)</code></pre>
<pre><code>##     Estado               Ano           states       states_summary     delta_abs     
##  Length:162         Min.   :2015   Min.   :   870   Min.   :   870   Min.   :  0.00  
##  Class :character   1st Qu.:2016   1st Qu.:  6971   1st Qu.:  6971   1st Qu.:  0.00  
##  Mode  :character   Median :2018   Median : 14688   Median : 14732   Median :  0.00  
##                     Mean   :2018   Mean   : 34108   Mean   : 34122   Mean   : 13.84  
##                     3rd Qu.:2019   3rd Qu.: 33123   3rd Qu.: 33123   3rd Qu.:  0.00  
##                     Max.   :2020   Max.   :311562   Max.   :311562   Max.   :383.00</code></pre>
<pre class="r"><code>combined_states %&gt;% 
  filter(delta_abs != 0) %&gt;%
  arrange(-delta_abs) %&gt;%
  DT::datatable()</code></pre>
<div id="htmlwidget-e1f2f9f3adde33d88818" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e1f2f9f3adde33d88818">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],["Bahia","Alagoas","Minas Gerais","Pará","Ceará","Mato Grosso","Piauí","Rio Grande do Norte","Goiás","Pernambuco","Maranhão","Rio de Janeiro","São Paulo","Rio Grande do Sul","Santa Catarina","Paraná","Mato Grosso do Sul","Roraima","Paraíba","Espírito Santo","Sergipe","Acre","Tocantins","Amapá","Amazonas"],[2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020,2020],[30299,9279,54925,14924,25420,6054,5553,7817,14767,34207,11903,72462,154796,38510,18421,31466,7023,1218,12690,12404,5730,2115,2748,1163,10062],[30682,9564,55158,15135,25589,6221,5674,7907,14856,34287,11980,72525,154855,38564,18475,31511,7041,1231,12699,12411,5736,2120,2750,1164,10063],[383,285,233,211,169,167,121,90,89,80,77,63,59,54,54,45,18,13,9,7,6,5,2,1,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Estado<\/th>\n      <th>Ano<\/th>\n      <th>states<\/th>\n      <th>states_summary<\/th>\n      <th>delta_abs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>ggplot(combined_states) + geom_histogram(aes(delta_abs), binwidth = 10)</code></pre>
<p><img src="sanity_checks_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
